---
layout: post
title: 'OpenGl'
author: xmc91
date: 2024-7-31
tags: Android 
---
> Android Open GL ：https://developer.android.google.cn/develop/ui/views/graphics/opengl/environment?hl=zh-cn

# 配置
+ manifest声明glEsVersion
+ 继承 GLSurfaceView
+ 设置opegl版本 
	> 2.0 android 2.2+
	> 3.0 android 4.3+
	> 3.1 android 5.0+
	> 3.2 android 7.0+
+ 继承GLSurfaceView.Render 设置RenderMode，并设置Render，实现 onSurfaceCreated、onSurfaceChanged、onDrawFrame


# 定义形状
+ 逆时针，三个点，每个点都有xyz，用FloatBuffer装数据。


# 绘制形状
+ shader，要用OpenGL 着色语言，就是字符串拼接的函数
+ 纹理

# 设置相机及投影
+ 正交投影和穿透投影，定义投影，用 projectionMatrix  （float[16]） 保存数据。


# 动画
+ Matrix 旋转、移动、渐变、缩放

# 触摸事件
+ onTouchEvent处理



## 其他
+ 设置背景透明
```
render 的onSurfaceCreated中
GLES20.glClearColor(0.0f, 0.0f, 0.0f, 0.0f)
GLES20.glEnable(GLES20.GL_BLEND)
GLES20.glBlendFunc(GLES20.GL_SRC_ALPHA, GLES20.GL_ONE_MINUS_SRC_ALPHA)


SurfaceView中的init
setEGLConfigChooser(8, 8, 8, 8, 16, 0)
setRenderer(mRenderer)
holder.setFormat(PixelFormat.TRANSLUCENT)
setZOrderOnTop(true)

总结

	•	设置清屏颜色的 alpha 值为 0.0f 来使背景透明。
	•	启用混合模式以支持透明度：glEnable(GL_BLEND) 和 glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA)。
	•	配置 GLSurfaceView 以支持透明背景。

```